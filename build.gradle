apply plugin: 'java'
apply plugin: 'eclipse'

import org.apache.tools.ant.filters.ReplaceTokens

version = '0.1'
String pluginName = 'PraedaGrandis'
String pluginMain = 'com.roboboy.PraedaGrandis.PraedaGrandis'
String author = 'Roboboy'

repositories {
  mavenCentral()
  mavenLocal()
  maven {
    url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
  }
}

dependencies {
	compile group: 'org.spigotmc', name: 'spigot', version: '1.9.2-R0.1-SNAPSHOT'
}

task generatePluginYaml() << {
	copy {
  	from 'templates/plugin.yml'
  	into 'src/main/resources/'
  	filter(ReplaceTokens, tokens: [
			version:		version,
  	  pluginName: pluginName,
  	  mainClass:  pluginMain,
  	  author:			author,
  	])
	}
}

task removePluginYaml(type: Delete) {
	delete 'src/main/resources/plugin.yml'
}

processResources.dependsOn('generatePluginYaml')
clean.dependsOn('removePluginYaml')
